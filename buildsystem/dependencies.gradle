allprojects {
    repositories {
        google()
        jcenter()
        mavenCentral()
        maven { url "https://jitpack.io" }
    }
    afterEvaluate {
        extensions.findByName('kapt')?.arguments {
            arg("dagger.formatGeneratedSource", "disabled")
            arg("dagger.gradle.incremental", "enabled")
        }
    }
    // Work-around because new objenesis version are using MethodHandle.invoke :/
    configurations.all {
        resolutionStrategy {
            force("org.objenesis:objenesis:2.6")
        }
    }
}

ext {

    // AndroidX libraries
    annotation          = '1.1.0'
    appcompat           = '1.1.0-rc01'
    cardview            = '1.0.0'
    constraintlayout    = '2.0.0-beta2'
    core                = '1.1.0-rc02'
    lifecycleExtensions = '2.1.0-rc01'
    recyclerview        = '1.1.0-beta01'
    room                = '2.1.0'

    // Third party libraries
    coroutines = '1.2.2'
    dagger2    = '2.24'
    moshi      = '1.8.0'
    okHttp     = '3.14.2'
    retrofit2  = '2.6.0'

    // Testing
    androidTestArchCore = '2.0.0'
    androidTestCore     = '1.2.0'
    androidTestExt      = '1.1.1'
    androidTestRules    = '1.2.0'
    androidTestRunner   = '1.2.0'
    assertJ             = '3.11.1'
    espresso            = '3.2.0'
    junit               = '4.12'
    mockk               = '1.9.3'

    // Log
    timber = '4.7.1'

    commonDependencies = [
            annotation                      : "androidx.annotation:annotation:${annotation}",

            appcompat                       : "androidx.appcompat:appcompat:${appcompat}",

            cardview                        : "androidx.cardview:cardview:${cardview}",

            constraintlayout                : "androidx.constraintlayout:constraintlayout:${constraintlayout}",

            core                            : "androidx.core:core:${core}",

            dagger2                         : "com.google.dagger:dagger:${dagger2}",
            dagger2Compiler                 : "com.google.dagger:dagger-compiler:${dagger2}",

            kotlinJdk                       : "org.jetbrains.kotlin:kotlin-stdlib-jdk7:${kotlin_version}",
            kotlinCoroutines                : "org.jetbrains.kotlinx:kotlinx-coroutines-core:${coroutines}",
            kotlinCoroutinesAndroid         : "org.jetbrains.kotlinx:kotlinx-coroutines-android:${coroutines}",

            lifecycleExtensions             : "androidx.lifecycle:lifecycle-extensions:${lifecycleExtensions}",

            moshi                           : "com.squareup.moshi:moshi:${moshi}",
            moshiCodegen                    : "com.squareup.moshi:moshi-kotlin-codegen:${moshi}",

            okHttp                          : "com.squareup.okhttp3:okhttp:${okHttp}",
            okHttpInterceptor               : "com.squareup.okhttp3:logging-interceptor:${okHttp}",

            recyclerview                    : "androidx.recyclerview:recyclerview:${recyclerview}",

            retrofit2                       : "com.squareup.retrofit2:retrofit:${retrofit2}",
            retrofitConverterMoshi          : "com.squareup.retrofit2:converter-moshi:${retrofit2}",

            roomCompiler                    : "androidx.room:room-compiler:${room}",
            roomRuntime                     : "androidx.room:room-runtime:${room}",
            roomKtx                         : "androidx.room:room-ktx:${room}",
    ]

    developmentDependencies = [
            timber : "com.jakewharton.timber:timber:${timber}",
    ]

    testingDependencies = [
            androidTestArchCore : "androidx.arch.core:core-testing:${androidTestArchCore}",

            androidTestCore     : "androidx.test:core:${androidTestCore}",

            androidTestExt      : "androidx.test.ext:junit:${androidTestExt}",

            androidTestRules    : "androidx.test:rules:${androidTestRules}",
            androidTestRunner   : "androidx.test:runner:${androidTestRunner}",

            assertj             : "org.assertj:assertj-core:${assertJ}",

            espressoContrib     : "androidx.test.espresso:espresso-contrib:${espresso}",
            espressoCore        : "androidx.test.espresso:espresso-core:${espresso}",
            espressoIntents     : "androidx.test.espresso:espresso-intents:${espresso}",

            junit               : "junit:junit:${junit}",

            mockk               : "io.mockk:mockk:${mockk}",
            mockkAndroid        : "io.mockk:mockk-android:${mockk}",
    ]
}